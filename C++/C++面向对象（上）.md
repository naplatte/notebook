## C++é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰

### 1.ä¸ºä»€ä¹ˆä¼šå‡ºç°é¢å‘å¯¹è±¡

- C è¯­è¨€ï¼šé¢å‘è¿‡ç¨‹ï¼Œå®šä¹‰çš„æ•°æ®æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥è®¿é—®
- é¢å‘å¯¹è±¡ï¼šå¯ä»¥å°† **æ•°æ®** åŠ **ä½¿ç”¨è¿™äº›æ•°æ®çš„å‡½æ•°** æ”¾åœ¨ä¸€èµ·ï¼ˆç±»ï¼‰ - æ¯ä¸ªå‡½æ•°åªå¯ä»¥è®¿é—®å®ƒéœ€è¦è®¿é—®çš„æ•°æ®ï¼Œä¸ä¼šæ··æ‚åœ¨ä¸€èµ·

![image-20250515112557763](https://raw.githubusercontent.com/mumushu1/Pictures/main/11122e55a971b4d6748066a57f6409f0.png)	

### 2.å¤´æ–‡ä»¶é˜²å«å¼å£°æ˜

- ä½œç”¨ï¼šè‹¥ä¸€ä¸ªå¤´æ–‡ä»¶è¢«åŒ…å«å¤šæ¬¡ï¼Œé˜²æ­¢ **é‡å¤å®šä¹‰**
- æ¯”å¦‚ **`include "a.h"`** å’Œ **`include "b.h"`** ï¼Œå¦‚æœ b.h é‡Œé¢åˆå¼•ç”¨ a.hï¼Œåœ¨ç¼–è¯‘æ—¶ a.h å°±ä¼šè¢«ç¼–è¯‘ä¸¤æ¬¡

```cpp
#ifndef CPP_STL_COMPLEX_H
#define CPP_STL_COMPLEX_H

class complex {

};

#endif //CPP_STL_COMPLEX_H
```

- å¦ä¸€ç§æ–¹å¼ï¼š `#param once`ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨â€œè¿™ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€æ¬¡â€

```cpp
#param once
class Person{};
```

### 3.å†…è”å‡½æ•° - inline

- å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹
- å­˜åœ¨å³åˆç†ï¼šä¸€äº›å‡½æ•°ä½“è¾ƒå°ï¼Œæ¯”å¦‚åªè¿›è¡Œ **ç®€å•** çš„åŠ æ³•å¹¶è¿”å›ï¼Œæ‰§è¡Œè¿™ç§å‡½æ•°æ—¶ï¼Œåœ¨ **å‚æ•°ä¼ é€’ã€ä¿å­˜ä¸Šä¸‹æ–‡** ç­‰å‡½æ•°è°ƒç”¨çš„æ“ä½œä¸ŠèŠ±è´¹çš„æ—¶é—´ç”šè‡³å¤§äºæ‰§è¡Œå‡½æ•°æœ¬èº«çš„æ—¶é—´
- å†…è”åšäº†ä»€ä¹ˆï¼šç¼–è¯‘å™¨ä¼šåœ¨è°ƒç”¨å¤„ **ç›´æ¥å±•å¼€å‡½æ•°ä»£ç **ï¼Œè€Œä¸æ˜¯èµ°ä¸€æ¬¡â€œè°ƒç”¨+è¿”å›â€çš„æµç¨‹ã€‚
- ğŸ¯ **åœ¨ç±»å†…å®šä¹‰çš„å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯ `inline` çš„ï¼Œ** ç±»å¤–å®šä¹‰çš„å‡½æ•°ï¼Œå¦‚æœæƒ³å†…è”ï¼Œéœ€è¦åŠ å…³é”®å­— inline

```cpp
inline int add(int a,int b) {
    return a + b;}
```

- inline åªæ˜¯ç»™ç¼–è¯‘å™¨å»ºè®®ï¼Œæœ€åæ˜¯å¦ä¸ºå†…è”ç¼–è¯‘å™¨è‡ªæœ‰å®šå¤º
- â‘  ä¸é€‚åˆå†…è”ï¼šå‡½æ•°å¤æ‚ã€æœ‰é€’å½’ï¼Œè™šå‡½æ•° â‘¡ é€‚åˆå†…è”ï¼šçŸ­å°ï¼Œç®€å•

### 4.è®¿é—®çº§åˆ«

- publicï¼šå¯ä»¥è¢«ç±»å¤–çš„å‡½æ•°è®¿é—®ï¼Œå¦‚æœæƒ³è®©ç±»ä¸­çš„å‡½æ•°è¢«å¤–ç•Œä½¿ç”¨ï¼Œå°±å°†è¿™äº›å‡½æ•°æ”¾åœ¨ public ä¸­
- private
    - åªæœ‰ç±»å†…çš„å‡½æ•°æ‰å¯è®¿é—®ï¼Œ**ä¸€èˆ¬å­˜æ”¾ç±»ä¸­å®šä¹‰çš„æ•°æ®**ï¼Œè¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡æœ¬æ¥çš„ç›®çš„ï¼Œå°†æ•°æ®åŠè®¿é—®æ•°æ®çš„å‡½æ•°æ”¾åœ¨ä¸€ä¸ªç±»ä¸­
    - å½“ç„¶å¦‚æœæƒ³å®šä¹‰ä¸€ä¸ªåªèƒ½åœ¨ç±»ä¸­æ‰èƒ½ä½¿ç”¨çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥å°†è¿™ä¸ªå‡½æ•°æ”¾åœ¨ private ä¸­
- protectï¼šæš‚æœªæ¶‰åŠ
- å°†æˆå‘˜å˜é‡è®¾ä¸º `private` æ˜¯ä¸ºäº†å°è£…å’Œå®‰å…¨ï¼Œå°†è®¿é—®æ¥å£ `real()` å’Œ `imag()` è®¾ä¸º `public` æ˜¯ä¸ºäº†å—æ§åœ°æä¾›è¯»å–åŠŸèƒ½ã€‚äºŒè€…ä¸çŸ›ç›¾ï¼Œè€Œæ˜¯é…åˆè‰¯å¥½ã€‚

```cpp
class complex {
public:
    complex(double r = 0,double i = 0) : re(r),im(i){}
    
    double real() const {
        return re;
    }
    double imag() const {
        return im;
    }

private:
    double re,im;//å®éƒ¨å’Œè™šéƒ¨
};

int main() {
    complex obj(1,2);
    obj.re = 2;
    //ä½¿ç”¨ç±»å†…å‡½æ•°è®¿é—®ç±»ä¸­ç§æœ‰å˜é‡
    double re = obj.real();
    double im = obj.imag();
    cout << "re = " << re << " im = " << im << endl;

    //ä½¿ç”¨ç±»å¤–å‡½æ•°è®¿é—®ç±»ä¸­ç§æœ‰å˜é‡ï¼ˆé”™è¯¯ï¼‰
    cout << obj.re;

    return 0;
}
```

### 5.æ„é€ å‡½æ•° & é‡è½½ï¼Œå•ä¾‹è®¾è®¡æ¨¡å¼

- æ„é€ å‡½æ•°çš„ **åˆå§‹åˆ— `complex(double r,double i) : re(r),im(i) {}`**
- ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œå› ä¸ºä¼šå­˜åœ¨ **å¤šç§ä¸åŒçš„å®šä¹‰å®ä¾‹çš„æ–¹å¼** ï¼Œè™½ç„¶æ¯ä¸ªæ„é€ å‡½æ•°çš„åç§°éƒ½ç›¸åŒï¼Œä½† **ç¼–è¯‘å™¨å¯¹äºè¿™äº›å‡½æ•°çš„æ ‡è®°æ˜¯ä¸åŒçš„**ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åç§°ã€è¿”å›å€¼ã€å‚æ•°ç­‰æŠŠä¸€ä¸ªå‡½æ•°èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†
- å°† **æ„é€ å‡½æ•°æ”¾åœ¨ private ä¸­ï¼Œå¹¶åœ¨ public æä¾›é™æ€å®ä¾‹ï¼Œå¯å½¢æˆå•ä¾‹è®¾è®¡æ¨¡å¼**  - ä¸€ä¸ªç±»ä¸å…è®¸å¤–ç•Œåˆ›å»ºå®ä¾‹ï¼Œåªå¯¹å¤–æä¾›å”¯ä¸€å®ä¾‹

```cpp
class A {
public:
    static A& getInstance();

private:
    A();
    A(const A& rhs);
};

A& A :: getInstance() {
    static A a;
    return a;
}
```

### 6.å¸¸é‡å‡½æ•°

- å³åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¹‹åï¼Œå‡½æ•°ä½“ä¹‹å‰ï¼ŒåŠ å…¥ const å…³é”®å­—
- **åªé€‚ç”¨äºç±»çš„æˆå‘˜å‡½æ•°ï¼ŒåŠ ä¸Šconstè¡¨ç¤ºæ­¤å‡½æ•°ä¸ä¼šé€šè¿‡thisæŒ‡é’ˆæ”¹å˜ç±»æˆå‘˜å˜é‡çš„å€¼ï¼Œè€Œå¯¹äºå…¨å±€å‡½æ•°ï¼Œå› ä¸ºæ²¡æœ‰thisæŒ‡é’ˆå’Œæˆå‘˜å˜é‡ï¼Œæ‰€ä»¥è‡ªç„¶ä¹Ÿæ²¡æœ‰åŠ ä»constè¿™ä¸ªè¯´æ³•**

```cpp
  double real() const {return re;}
  double imag() const {return im;}
  
  const complex obj(1,2);
```

- ä½œç”¨ï¼š **è‹¥å‡½æ•°ä¼šæ”¹å˜å˜é‡çš„å€¼ï¼Œåˆ™ä¸åŠ  constï¼Œå¦åˆ™åŠ  const**
- å¦‚æœè¿™ä¸ªå‡½æ•°æ²¡æœ‰æ”¹å˜å˜é‡çš„å€¼ï¼Œä»¥ä¸Šé¢çš„ real()å’Œ imag()ä¸ºä¾‹ï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰åŠ  constï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå°±æ— æ³•åˆ›å»º const ç±»å‹çš„å¯¹è±¡
    - ç›´è§‚ç†è§£å°±æ˜¯ï¼šä½ åœ¨åˆ›å»ºå¯¹è±¡æ—¶å¸Œæœ›è¿™ä¸ªå¯¹è±¡æ˜¯ constï¼Œä¹Ÿå°±æ˜¯ **ä¸å¯ä¿®æ”¹çš„ï¼Œ** ä½†ä½ çš„ **å‡½æ•°** æ²¡åŠ  constï¼Œå³å‡½æ•°è®¤ä¸ºæ˜¯å¯ä¿®æ”¹çš„ï¼Œè¿™å°±ä¼šçŸ›ç›¾ï¼›
    - æ‰€ä»¥å¦‚æœä½ ä¸åˆ›å»º const ç±»å‹çš„å¯¹è±¡ï¼Œå¯¹äºä¸ä¼šä¿®æ”¹å€¼çš„å‡½æ•°ä¸åŠ  const ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨èï¼
- **å†™ä»£ç çš„ä¹ æƒ¯ï¼šå¯¹äºä¸ä¼šä¿®æ”¹å˜é‡å€¼çš„å‡½æ•°ï¼Œä¸€å¾‹å†™æˆå¸¸é‡å‡½æ•°**

### 7.å‚æ•°ä¼ é€’ï¼šä¼ å€¼ã€ä¼ å¼•ç”¨ã€ä¼  const å¼•ç”¨

- å€¼ä¼ é€’ï¼šå°±æ˜¯æŠŠéœ€è¦ä¼ é€’çš„å˜é‡ä¸€æ•´ä¸ªæ¬è¿‡å»ï¼Œå‹åˆ°æ ˆä¸­ï¼Œä¸è®ºè¿™ä¸ªå‚æ•°æœ‰å¤šå¤§ï¼Œæ¯”å¦‚å€¼ä¼ é€’ä¸€ä¸ªå¤§å°ä¸º 100 çš„æ•´å‹æ•°ç»„ï¼Œé‚£ä¹ˆ 400B çš„æ•°æ®å°±ä¼šè¢«å‹æ ˆ
- å¼•ç”¨ä¼ é€’ï¼šä¼ å¼•ç”¨å°±ç†è§£ä¸ºä¼ æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯ä¼ è¿™ä¸ªå‚æ•°çš„ **åœ°å€**
- å†™ä»£ç çš„å¤§æ–¹å‘ï¼šæ‰€æœ‰çš„å‚æ•°ä¼ é€’éƒ½ä¼ å¼•ç”¨ï¼Œçœç©ºé—´ï¼Œæ•ˆç‡æ›´é«˜
- éƒ½ä¼ å¼•ç”¨çš„é—®é¢˜ï¼šæˆ‘ä»¬çŸ¥é“ï¼Œå€¼ä¼ é€’åœ¨å‡½æ•°å†…éƒ¨æ˜¯ä¸èƒ½ä¿®æ”¹å‚æ•°å€¼çš„ï¼Œè€Œå¼•ç”¨ä¼ é€’å¯ä»¥ï¼Œé‚£ **å¦‚ä½•åœ¨ä¼ å¼•ç”¨çš„å‰æä¸‹ï¼Œè¿˜è¦æ±‚å‡½æ•°ä¸æ”¹å˜å‚æ•°çš„å€¼ï¼Ÿç­”æ¡ˆå°±æ˜¯ä¼  const å¼•ç”¨**ï¼Œæ¯”å¦‚ä¹‹å‰å†™è¿‡çš„æŒ‰ pair çš„ key æ’åºçš„å‡½æ•°

```cpp
auto cmp = [](const pair<int,int> &pair1 , const pair<int,int> &pair2) {
    return pair1.first < pair2.first;
};
```

- cosnt è¡¨ç¤ºå³ä½¿ä¼ çš„æ˜¯å¼•ç”¨ï¼Œä½†æ˜¯åœ¨å‡½æ•°å†…éƒ¨ä¹Ÿä¸èƒ½ä¿®æ”¹è¿™ä¸ªå‚æ•°çš„å€¼
- å‡½æ•°è¿”å›ç±»å‹ä¹Ÿæœ‰è¿”å›å€¼ä»¥åŠè¿”å›å¼•ç”¨ï¼Œå†™ä»£ç æ—¶ï¼Œå¦‚æœ **å¯ä»¥è¿”å›å¼•ç”¨**ï¼Œé‚£å°±è¿”å›å¼•ç”¨ï¼Œå³å°½é‡è¿”å›å¼•ç”¨
    - ä»€ä¹ˆæ—¶å€™ä¸èƒ½è¿”å›å¼•ç”¨ï¼šè¿”å›å±€éƒ¨å¯¹è±¡çš„å¼•ç”¨ âŒï¼Œè¿”å›ä¸´æ—¶å¯¹è±¡çš„å¼•ç”¨ âŒ
    - ä»€ä¹ˆæ—¶å€™å¯ä»¥è¿”å›å¼•ç”¨ï¼šå½“å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª **åœ¨å‡½æ•°å¤–ä»ç„¶æœ‰æ•ˆçš„å¯¹è±¡ï¼Œ** åˆ™å¯ä»¥è¿”å›å¼•ç”¨

### 8.å‹å…ƒ

- ==å‹å…ƒå‡½æ•°å¯ä»¥ä½¿ç”¨ç±»ä¸­ private å†…çš„å˜é‡ï¼ˆprotect å’Œ public è‡ªç„¶ä¹Ÿå¯ä»¥ï¼‰ï¼Œå‹å…ƒå‡½æ•°çš„æƒé™æ¯”å­ç±»è¦æ›´å¼ºä¸€ç‚¹ï¼Œå­ç±»åªèƒ½è®¿é—® public å’Œ protect==
- è¿™å…¶å®æ˜¯æ‰“å¼€äº† C++å°è£…çš„ä¸€ä¸ªå¤§é—¨
- å¦‚æœä¸ä½¿ç”¨å‹å…ƒï¼Œåˆ™åªèƒ½ä½¿ç”¨ç±»ä¸­ public ä¸­æä¾›çš„æ–¹æ³•å»æ‹¿ private ä¸­çš„å˜é‡ï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯ **`real()`** å’Œ **`imag()`** ä¸¤ä¸ªå‡½æ•°
- **åŒä¸€ä¸ª class çš„ä¸åŒå¯¹è±¡ä¹‹é—´äº’ä¸ºå‹å…ƒ**

```cpp
class complex {
public:
    complex() : re(0),im(0){}
    complex(double r,double i) : re(r),im(i) {}

    int add(const complex& obj) {
        return obj.re + obj.im;
    }

    double real() const {return re;}
    double imag() const {return im;}

private:
    double re,im;//å®éƒ¨å’Œè™šéƒ¨
};
int main() {
    complex c1(1,2);
    complex c2 (2,3);
    int res = c1.add(c2); //c1 å¯ä»¥è®¿é—® c2 çš„ private å˜é‡
    cout << "res = " << res;

    return 0;
}
```

### 9.æ“ä½œç¬¦é‡è½½ 1 - æˆå‘˜å‡½æ•°

- ä»»ä½•æˆå‘˜å‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ªéšè—çš„å‚æ•° - this æŒ‡é’ˆï¼ˆé™¤äº†é™æ€å‡½æ•°ï¼‰ï¼Œè°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œthis æŒ‡é’ˆå°±æŒ‡å‘è°çš„åœ°å€
- this æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œæ‰€ä»¥å¦‚æœå‡½æ•°çš„å‚æ•°æœ‰ thisï¼Œåˆ™å‚æ•°ç±»å‹éœ€è¦ä¸ºæŒ‡é’ˆç±»å‹è€Œä¸æ˜¯å¼•ç”¨ç±»å‹
- **æ“ä½œç¬¦é‡è½½ï¼šå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰è¿”å›å€¼ï¼Œæœ‰å‚æ•°ï¼Œå‡½æ•°åå°±æ˜¯éœ€è¦é‡è½½çš„æ“ä½œç¬¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåœ¨æ“ä½œç¬¦å‰åŠ ä¸Šå…³é”®å­— *operator***
- **`*ths`** æœ¬èº«åœ¨è¡¨è¾¾å¼è¯­ä¹‰ä¸Šæ˜¯ä¸€ä¸ªå·¦å€¼ï¼ˆlvalueï¼‰ï¼Œå¯ä»¥å®‰å…¨åœ°è¿”å›å¼•ç”¨ã€‚å…³é”®åœ¨äºï¼š**è¿™ä¸ªå¯¹è±¡è¿˜åœ¨å¤–éƒ¨â€œæ´»ç€â€**ï¼Œç”Ÿå‘½å‘¨æœŸæ²¡ç»“æŸï¼

```cpp
class complex {
public:
    complex() : re(0),im(0){}
    complex(double r,double i) : re(r),im(i) {}
    double real() const {return re;}
    double imag() const {return im;}

private:
    double re,im;//å®éƒ¨å’Œè™šéƒ¨

public:
		//ths æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œ*ths æ˜¯ä¸€ä¸ª complex ç±»çš„å¯¹è±¡ï¼Œè¿”å›* ths å°±ç›¸å½“äºè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è¿”å›å€¼æ˜¯ complex&
    complex& __doapl(complex* ths,const complex& r) {
        ths->re += r.re;
        ths->im += r.im;
        return *ths;
    }
    //this æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæ‰€æœ‰ä¸Šé¢å¿…é¡»ä¼ ä¸€ä¸ªæŒ‡é’ˆï¼Œä¸èƒ½ä¼ å¼•ç”¨
    complex& operator += (const complex& r) {
        return __doapl(this,r);
    }
};
int main() {
    complex c1(1,2);
    complex c2 (2,3);

    c1 += c2;
    cout << c1.real() << "+" << c1.imag();//3 + 5
    return 0;
}

```

- è°ƒç”¨å‡½æ•°çš„å¯¹è±¡ï¼Œä¸éœ€è¦çŸ¥é“å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆ ï¼Œæ¯”å¦‚åœ¨æ‰§è¡Œ c1 += c2 æ—¶ï¼Œc1 æ— éœ€çŸ¥é“è¿”å›å€¼æ˜¯ complex&ç±»å‹çš„ï¼Œå¦‚æœä»…æ‰§è¡Œ c1+= c2 çš„æ“ä½œï¼Œæ“ä½œç¬¦é‡è½½å¯¹åº”å‡½æ•°çš„è¿”å›å€¼ä¹Ÿå¯ä»¥æ˜¯ voidï¼Œä½†éœ€è¦è€ƒè™‘ä½¿ç”¨æ“ä½œç¬¦çš„å¤šç§æƒ…å†µï¼Œæ¯”å¦‚å®ç° c1 += c2 += c3ï¼Œå°±éœ€è¦è¦æ±‚è¿”å›å€¼æ˜¯ complex&ç±»å‹

### 10.æ“ä½œç¬¦é‡è½½ 2 - éæˆå‘˜å‡½æ•°

- å’Œæˆå‘˜å‡½æ•°æ“ä½œç¬¦é‡è½½çš„ä¸åŒï¼šæˆå‘˜å‡½æ•°å¯ä»¥ä½¿ç”¨ this æŒ‡é’ˆ

```cpp
//class ä¹‹å¤– â‘ ï¼šå…¨å±€å‡½æ•°
inline double img(const complex& x) {
    return x.imag();
}
inline double real(const complex& x) {
    return x.real();
}
//class ä¹‹å¤– â‘¡ï¼šæ“ä½œç¬¦é‡è½½
inline complex operator + (const complex& c1,const complex& c2) {//å¤æ•° + è™šæ•°
    return complex(real(c1) + real(c2),img(c1) + img(c2)); 
}
inline complex operator + (double x,const complex& c1) {//å¤æ•° + å®éƒ¨
    return complex(real(c1) + x, img(c1));
}
inline complex operator + (const complex& c1,double y) {
    return complex (real(c1),img(c1) + y);
}

```

- å…±è½­å¤æ•° & é‡è½½ << è¾“å‡º
    - ç°ä»£ C++èƒ½å¤Ÿ cout å„ç§ç±»å‹çš„æ•°æ®ï¼Œå®é™…ä¸Šå°±æ˜¯å¯¹ << åšäº†å¾ˆå¤šæ“ä½œç¬¦é‡è½½ string
    
    ```cpp
    //å…±è½­å¤æ•°
    inline complex conj (complex& x) {
        return complex(real(x),-img(x));
    }
    //é‡è½½ <<ï¼Œè¾“å‡ºå¤æ•°
    inline ostream & operator << (ostream& os,const complex& x) {
        return os << '(' << real(x) << ',' << img(x) << 'i' << ')';
    }
    ```
    

### 11.ä¸´æ—¶å¯¹è±¡(temp object)

- ç”¨æ³•ï¼š **`typename + ()` , typename å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ç±»**
- æ¯”å¦‚ä¸Šé¢çš„ä¸‰ä¸ªå‡½æ•°è¿”å› **`complex(real(c1)_+x,img(c2))` ï¼Œ** å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ **ç”Ÿå‘½å‘¨æœŸåœ¨æœ¬è¡Œä»£ç æ‰§è¡Œå®Œå°±ç»“æŸ**
- æ‰€ä»¥ä¸Šé¢ä¸‰ä¸ªå‡½æ•°ä¸€å®šä¸èƒ½è¿”å›å¼•ç”¨

### 12.å¤æ•°ç±»æ€»ç»“ - åœ¨å†™ä¸€ä¸ªç±»æ—¶éœ€è¦æ³¨æ„çš„åœ°æ–¹

- æ„é€ å‡½æ•°ï¼šå­¦ä¼šä½¿ç”¨ **åˆå§‹åˆ—**
- å‡½æ•°çš„å‚æ•°ä¼ é€’ï¼šå¼•ç”¨ä¼ é€’ï¼Œæ˜¯å¦éœ€è¦åŠ  const
- å‡½æ•°çš„è¿”å›å€¼ï¼šæ˜¯å¦å¯ä»¥ **return by reference**
- å‡½æ•°å®šä¹‰ï¼šæ˜¯å¦éœ€è¦æ ‡è®°ä¸º **const** â­
- æ“ä½œç¬¦é‡è½½ï¼šå®šä¹‰åœ¨ç±»å†…è¿˜æ˜¯ç±»å¤–

### 13.æ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼ã€ææ„ï¼ˆbig threeï¼‰

- å­—ç¬¦ä¸²ç±»çš„è®¾è®¡ï¼šä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å­—ç¬¦ä¸²å­˜å‚¨çš„åœ°å€ï¼Œè€Œéç›´æ¥ä½¿ç”¨æ•°ç»„å­˜å­—ç¬¦ä¸² - å› ä¸ºå­—ç¬¦ä¸²é•¿åº¦æœ‰å¤§æœ‰å°ï¼Œå¦‚æœåœ¨ç±»ä¸­è®¾å®šä¸€ä¸ªæ•°ç»„æˆå‘˜å­˜å­—ç¬¦ä¸²ï¼Œä¸çŸ¥é“éœ€è¦è®¾å®šå¤šå¤§ã€‚
- æ‰€ä»¥å­—ç¬¦ä¸²ç±»æ˜¯ä¸€ä¸ªå¸¦æŒ‡é’ˆçš„ç±» ï¼Œå¯¹äºå¸¦æŒ‡é’ˆçš„ç±»ï¼Œä¸€å®šè¦è‡ªå·±å†™å‡º **æ‹·è´æ„é€ &æ‹·è´** èµ‹å€¼

- å¦‚æœä¸è‡ªå·±å†™ï¼Œä½¿ç”¨ç¼–è¯‘å™¨æä¾›çš„æ‹·è´æ„é€ å’Œæ‹·è´å¤åˆ¶ä¼šæ€æ ·ï¼šä»¥ä¸‹é¢ä¸ºä¾‹ï¼Œå¦‚æœä½¿ç”¨ç¼–è¯‘å™¨çš„å¤åˆ¶ï¼Œä¼šä½¿ b çš„æŒ‡é’ˆæŒ‡å‘ a æŒ‡å‘çš„åœ°æ–¹ï¼Œå¯¼è‡´ b åŸæ¥æŒ‡å‘çš„ä¸œè¥¿æ²¡æœ‰æŒ‡é’ˆæŒ‡å‘äº† **ï¼ˆå†…å­˜æ³„æ¼ï¼‰**ï¼Œb å’Œ a å…±åŒæŒ‡å‘ä¸€ä¸ªä½ç½®ï¼Œå…¶ä¸­ä¸€ä¸ªææ„ä¹Ÿä¼šå‡ºç°é—®é¢˜ï¼Œè¿™ç§æ‹·è´ç§°ä¸º **æµ…æ‹·è´ï¼ˆåªæ‹·è´æŒ‡é’ˆï¼‰ï¼Œ** æˆ‘ä»¬åé¢è‡ªå·±å®ç°çš„æ‹·è´å¤åˆ¶ï¼Œå¯ä»¥å®ç° **æ·±æ‹·è´**

<img src="https://raw.githubusercontent.com/mumushu1/Pictures/main/4e53f407045d57fe54e97c245dc6d5f7.png" alt="image-20250515112654042" style="zoom: 67%;" />	

```cpp
//æ„é€ å‡½æ•°
inline String ::String(const char* str) {
    if (str) {
        m_data = new char[strlen(str) + 1];
        strcpy(m_data,str);
    }
    else {
        m_data = new char[1];
        *m_data = '\0';
    }
}
//æ‹·è´æ„é€ å‡½æ•°ï¼šç›´æ¥å–ç›®æ ‡ str çš„å†…å®¹ä½œä¸ºè‡ªå·±çš„å†…å®¹ï¼ˆæ·±æ‹·è´ï¼‰
inline String ::String(const String &str) {
    m_data = new char[strlen(str.m_data) + 1];
    strcpy(m_data,str.m_data);//strcpy å°†æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹å¤åˆ¶
}
//æ‹·è´èµ‹å€¼
inline String &String::operator=(const String &str) {
    //æ£€æµ‹è‡ªæˆ‘èµ‹å€¼ï¼šè¿™ä¸€æ­¥çš„å¿…è¦çš„ï¼Œå¦‚æœè‡ªå·±æ‹·è´è‡ªå·±ï¼Œæ²¡æœ‰è¿™ä¸€æ­¥ç›´æ¥æ‰§è¡Œ delete [] m_dataï¼Œä¼šå°†è‡ªå·±åˆ æ‰ï¼Œæ— æ³•è¿›è¡Œåé¢çš„æ‹·è´å·¥ä½œ
    if (this == &str) {
        return *this;
    }
    delete[] m_data;
    m_data = new char[strlen(str.m_data) + 1];
    strcpy(m_data,str.m_data);
    return *this;
}
//ææ„å‡½æ•°
inline String :: ~String() {
    delete[] m_data;
}
```

### 14.static

- é™æ€æ•°æ®&é™æ€å‡½æ•°ï¼šä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ª
    - é™æ€å‡½æ•°æ²¡æœ‰ this æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼ˆå…¶ä»–æˆå‘˜å‡½æ•°é»˜è®¤æœ‰ this æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼‰
    - **é™æ€å‡½æ•°åªèƒ½å¤„ç†é™æ€æ•°æ®**
- è°ƒç”¨é™æ€å‡½æ•°&é™æ€å˜é‡çš„ä¸¤ç§æ–¹å¼
    - é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼ˆå’Œæ™®é€šæˆå‘˜å˜é‡&æˆå‘˜å‡½æ•°è°ƒç”¨æ–¹æ³•ç›¸åŒï¼‰
    - é€šè¿‡ç±»åç›´æ¥è°ƒç”¨ **`Account::m_rate`**
- éœ€è¦ä½¿ç”¨é™æ€çš„åœºæ™¯ï¼šæ¯”å¦‚è´¦æˆ·ç±»ï¼Œæ¯ä¸ªæˆå‘˜å¯ä»¥æœ‰è‡ªå·±çš„å­˜æ¬¾ã€åˆ©æ¯ï¼Œä½†æ¯ä¸ªäººçš„åˆ©ç‡æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç±»ä¸­åªéœ€è¦ä¸€ä¸ªåˆ©ç‡ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªåˆ©ç‡è®¾ä¸ºé™æ€

```cpp
class Account {
public:
    static double m_rate;//åˆ©ç‡

    static void set_rate(const double& x) {
        m_rate = x;
    }
};
double Account::m_rate = 9.0;//å¦‚ä½•èµ‹å€¼

int main() {
    Account obj;
    cout << obj.m_rate << endl;

    //ç›´æ¥ä½¿ç”¨ç±»åè®¿é—®é™æ€æˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜å˜é‡
    Account::set_rate(5.0);
    cout << Account::m_rate;
}
```

### 15.æ¨¡æ¿

- ç±»æ¨¡æ¿ï¼šç±»çš„æˆå‘˜å˜é‡å¯ä»¥æœ‰ä¸åŒçš„ç±»å‹

```cpp
template<typename T>

class lr_template {
public:
    lr_template(const T& r,const T& i) : re(r),im(i){}
    T get_re() const {return re;}
    T get_im() const {return im;}

private:
    T re;
    T im;
};

int main() {
    lr_template<int> c1(12,3);
    lr_template<float> c2(2.1,32.4);
}
```

- å‡½æ•°æ¨¡æ¿

```cpp
class Stone {
public:
    Stone(int w,int h,int weight) : w(w),h(h),weight(weight){}

    bool operator < (const Stone& sto) const {
        return this->weight < sto.weight;
    }

    int get_weight() const {
        return this->weight;
    }

private:
    int w,h,weight;
};

template<typename T>
inline const T& min_cl(const T& a,const T& b) {
    return a < b ? a : b;
}

int main() {
    Stone s1(1,1,2);
    Stone s2(1,1,3);
    //è°ƒç”¨æ—¶è‡ªåŠ¨æ¨å¯¼å‚æ•°ç±»å‹
    auto res = min_cl(s1,s2);
    cout << "è¾ƒå°çš„weightä¸º:" << res.get_weight() << endl;

    return 0;
}
```

- ç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿æ€»ç»“
    - ç±»æ¨¡æ¿ç”¨äºå†™ **é€šç”¨çš„æ•°æ®ç»“æ„ç±»ï¼Œ** å‡½æ•°æ¨¡æ¿ç”¨äºå†™ **é€šç”¨ç®—æ³•å‡½æ•°**
    - ç±»æ¨¡æ¿åœ¨åˆ›å»ºå¯¹è±¡æ—¶å¿…é¡» **æŒ‡å®š** ç±»å‹ï¼Œå‡½æ•°æ¨¡æ¿åœ¨è°ƒç”¨æ—¶ **è‡ªåŠ¨æ¨å¯¼ç±»å‹**

### 16.å‘½åç©ºé—´

- ä½œç”¨ï¼šé¿å…å‘½åå†²çªï¼Œåœ¨åŒä¸€å‘½åç©ºé—´ä¸­ï¼Œä¸èƒ½å‡ºç°åå­—ç›¸åŒåŠŸèƒ½ä¸åŒçš„å‡½æ•°ï¼ˆé™¤äº†é‡è½½ï¼‰ï¼Œä¸åŒå‘½åç©ºé—´ä¸­åˆ™å¯ä»¥
- C++çš„æ ‡å‡†åº“å®šä¹‰åœ¨ std å‘½åç©ºé—´ä¸­

```cpp
#include <iostream>
namespace MySpace{
    void printf() {
        std::cout << "This is my namespace" << std::endl;
    }
}

int main() {
	using namespace MySpace;
  printf();//This is my namespace
}
```

- ä¸‰ç§æŒ‡å®šå‘½åç©ºé—´çš„æ–¹æ³•

```cpp
//æ³•ä¸€
using namespce std;

//æ³•äºŒï¼šä»…ä½¿ç”¨å‘½åç©ºé—´ä¸­çš„æŸå‡ ä¸ªå‡½æ•°
using std::cout;// from xx import xx

//æ³•ä¸‰ï¼šç›´æ¥åœ¨ä½¿ç”¨å‰å£°æ˜
std::cout << "hello" << std::endl;
```

ä»¥ä¸Šå†…å®¹æ˜¯å…³äº **åŸºäºå¯¹è±¡çš„è®¾è®¡**ï¼Œå³è®¾è®¡å•ä¸€çš„ç±»ï¼Œæ— è®ºè¿™ä¸ªç±»æ˜¯å¦å¸¦æŒ‡é’ˆï¼Œä¸‹é¢çš„å†…å®¹æ˜¯å…³äº **é¢å‘å¯¹è±¡çš„è®¾è®¡**ï¼Œå³ç±»ä¸ç±»ä¹‹é—´å…·æœ‰ **å…³ç³»** 

### 17.ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»

- compositionï¼ˆå¤åˆï¼‰
- inheritanceï¼ˆç»§æ‰¿ï¼‰
- delegationï¼ˆå§”æ‰˜ï¼‰

### 18.composition å¤åˆï¼ˆhas-a çš„å…³ç³»ï¼‰

- å¤åˆæ˜¯æŒ‡ **ä¸€ä¸ªç±»ä¸­æœ‰å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºæˆå‘˜å˜é‡**
- æ¯”å¦‚é˜Ÿåˆ— queue å’ŒåŒç«¯é˜Ÿåˆ— dequeï¼Œä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ç›´æ¥ä½¿ç”¨å¦ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°
- å½¢æˆçš„è®¾è®¡æ¨¡å¼ï¼š***adapter é€‚é…å™¨***ï¼Œä½¿ç”¨å¤åˆæ¥å®ç°â€œè¡Œä¸ºè½¬å‘â€œï¼Œå³ä¸‹é¢ queue ç±»ä¸­ deque ç±»çš„å¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‡½æ•°
  
    <img src="https://raw.githubusercontent.com/mumushu1/Pictures/main/b90145630b1d47c4f27e408c59f96b90.png" alt="image-20250515112731756" style="zoom:80%;" />		
    
- ä¸‹é¢çš„ä¾‹å­å°±ç±»ä¼¼äº DS ä¸­çš„é‚»æ¥è¡¨æ•°æ®ç»“æ„ï¼Œåœ¨ä¸€ä¸ª struct ALGraph ä¸­å­˜åœ¨ struct VNode ç±»å‹çš„å¯¹è±¡

<img src="https://raw.githubusercontent.com/mumushu1/Pictures/main/9a6802ef0b67068f34c39becba764933.png" alt="image-20250515112754358" style="zoom: 80%;" />	

```cpp
typedef struct ArcNode{
	int data;
	struct ArcNode* next;
}ArcNode;

typedef struct VNode{
	int data;
	struct ArcNode* first;
}VNode;

typedef struct{
	struct VNode* List[maxsize];
	int numv,nume;
}ALGraph;
```

- å¤åˆå…³ç³»ä¸‹çš„æ„é€ å’Œææ„ï¼ˆç¼–è¯‘å™¨æ‰§è¡Œçš„é¡ºåºï¼‰ï¼Œä»¥ queue å’Œ deque ä¸ºä¾‹
    - æ„é€ ç”±å†…è€Œå¤–ï¼šå…ˆè°ƒç”¨ deque çš„ **é»˜è®¤æ„é€ å‡½æ•°**ï¼Œå†è°ƒç”¨ queue çš„æ„é€ å‡½æ•°ï¼ˆè¿™ä¸ªåº”è¯¥ä¸éš¾ç†è§£ï¼‰
    - ææ„ç”±å¤–è€Œå†…ï¼šå…ˆè°ƒç”¨ queue çš„ææ„å‡½æ•°ï¼Œå†è°ƒç”¨ deque çš„æ„é€ å‡½æ•°ï¼ˆæƒ³è±¡æˆå‰¥æ´‹è‘±ï¼Œå…ˆæ‹¿æ‰å¤–é¢çš„ç“£å†æ‹¿é‡Œé¢çš„ç“£ï¼‰
- **ç±»ä¹‹é—´çš„å¤åˆå…³ç³»ï¼Œå°±æ˜¯ä¸€ä¸ªç±»ä½œä¸ºå¦ä¸€ä¸ªç±»çš„â€œæˆå‘˜å˜é‡â€ï¼Œæ„æˆâ€œæ•´ä½“â€“éƒ¨åˆ†â€çš„ç»“æ„ï¼Œå¤åˆå¯¹è±¡éšå®¿ä¸»ç±»ä¸€èµ·åˆ›å»ºå’Œé”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·ã€‚**

### 19.delegation å§”æ‰˜

- æ¦‚å¿µï¼šä¸€ä¸ªå¯¹è±¡ **å°†æŸä¸ªæ“ä½œçš„å®ç°å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å®Œæˆ**ï¼Œå³â€œåŠŸèƒ½ä»£ç†â€ã€‚
- å¦‚ä½•ç†è§£å§”æ‰˜ï¼šå³ **composition by referenceï¼Œ** ä¹Ÿæ˜¯ä¸€ä¸ªç±»ä¸­å«æœ‰å¦ä¸€ä¸ªç±»çš„ä¸œè¥¿ï¼Œåªä¸è¿‡å«æœ‰çš„ä¸æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªç±»çš„æŒ‡é’ˆ
- è¿™æ ·åšçš„æ„ä¹‰ï¼šä¸»ç±»ç»™å¤–ç•Œæä¾›æ¥å£ï¼Œè‡³äºä¸»ç±»çš„å‡½æ•°ï¼Œéƒ½æ˜¯å¦ä¸€ä¸ªç±»å®ç°çš„ï¼Œä¸»ç±»ä¸­åŒ…å«è¿™ä¸ªç±»çš„æŒ‡é’ˆæ¥è°ƒç”¨è‡ªå·±çš„å‡½æ•°ï¼Œ**æ¥å£ä¸å®ç°ä¸¥æ ¼åœ°åˆ†å¼€**

<img src="https://raw.githubusercontent.com/mumushu1/Pictures/main/5d811b776eb5846182c42f82be2c77ce.png" alt="image-20250515112828966" style="zoom:80%;" />	

- å¤åˆ VS å§”æ‰˜
    - **å¤åˆ** æ˜¯â€œæˆ‘æœ‰ä¸€ä¸ªä½ â€
    - **å§”æ‰˜** æ˜¯â€œæˆ‘è®©ä½ æ›¿æˆ‘åšè¿™äº‹â€

### 20.inheritance ç»§æ‰¿ï¼ˆis-a çš„å…³ç³»ï¼‰

- æ¦‚å¿µï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°
- å­ç±»å¯¹è±¡ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯çˆ¶ç±»çš„ä¸œè¥¿ï¼ˆå¯ä»¥ç±»æ¯”æ•°æ®åº“ä¸­çš„å­ç±» - ç ”ç©¶ç”Ÿå’Œæœ¬ç§‘ç”Ÿçš„çˆ¶ç±»æ˜¯å­¦ç”Ÿï¼Œå®ƒä»¬éƒ½å…·æœ‰å­¦ç”Ÿçš„å±æ€§ï¼ŒåŠ ä¸Šä»–ä»¬è‡ªå·±ç‹¬æœ‰çš„å±æ€§ï¼‰
- ç»§æ‰¿å…³ç³»ä¸‹çš„æ„é€ å’Œææ„ï¼ˆç¼–è¯‘å™¨çš„æ‰§è¡Œé¡ºåºï¼‰
    - æ„é€ ï¼šç”±å†…ï¼ˆçˆ¶ç±»ï¼‰è€Œå¤–ï¼ˆå­ç±»ï¼‰
    - ææ„ï¼šç”±å¤–ï¼ˆå­ç±»ï¼‰è€Œå†…ï¼ˆçˆ¶ç±»ï¼‰
- è¿›ä¸€æ­¥å‰–æç»§æ‰¿å…³ç³»ä¸‹å­ç±»å’Œçˆ¶ç±»çš„æ„é€ å‡½æ•°
    - å¦‚æœçˆ¶ç±»ä½¿ç”¨é»˜è®¤æ„é€ ï¼Œåˆ™åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ 
    - **å¦‚æœçˆ¶ç±»è‡ªå·±å†™äº†æ„é€ ï¼Œåˆ™åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°**

```cpp
class Person {
public:
    Person(string i,string n) : id(i),name(n){}
    void print() const {
        cout << "I'm a person" << endl;
    }
    string res_id() const {
        return this->id;
    }
    string res_name() const {
        return this->name;
    }
protected:
    string id;
    string name;
};

class Student : public Person {
public:
    ****//çˆ¶ç±»ä¸ä½¿ç”¨é»˜è®¤æ„é€ ï¼Œåˆ™å­ç±»çš„æ„é€ å‡½æ•°åˆ—è¡¨éœ€è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
    Student(string id,string name,string school,int grade) : Person(id,name),school(school),grade(grade){}
    string res_school () const {
        return this->school;
    }
    int res_grade() const {
        return this->grade;
    }
private:
    string school;
    int grade;
};
int main() {
    Student s1("101","nap_latte","pku",500);
    cout << "å­¦ç”Ÿçš„å§“åï¼š" << s1.res_name() << endl;
    cout << "å­¦ç”Ÿçš„å­¦æ ¡ï¼š" << s1.res_school() << endl;
    cout << "å­¦ç”Ÿçš„æˆç»©ï¼š" << s1.res_grade() << endl;
//    å­¦ç”Ÿçš„å§“åï¼šnap_latte
//    å­¦ç”Ÿçš„å­¦æ ¡ï¼špku
//    å­¦ç”Ÿçš„æˆç»©ï¼š500
    return 0;
}
```

- ä¸‰ç§ç»§æ‰¿æ–¹å¼
  
  
    | ç»§æ‰¿æ–¹å¼ | çˆ¶ç±» public æˆå‘˜åœ¨å­ç±»ä¸­å˜æˆ | çˆ¶ç±» protected æˆå‘˜åœ¨å­ç±»ä¸­å˜æˆ | å˜åŒ– |
    | --- | --- | --- | --- |
    | public | public | protected | ä¸å˜ï¼ˆis-a çš„å…³ç³»ï¼‰ |
    | protected | protected | protected | å…¨å˜ä¸º protect |
    | private | private | private | å…¨å˜ä¸º private |

### 21.è™šå‡½æ•°

- virtual å‡½æ•°ï¼šå¸Œæœ›å­ç±»é‡å†™ï¼ˆoverrideï¼‰è¿™ä¸ªå‡½æ•°ï¼ˆè¿™ä¸ªå‡½æ•°åœ¨çˆ¶ç±»å·²æœ‰é»˜è®¤å®šä¹‰ï¼‰
- pure virtualï¼ˆçº¯è™šå‡½æ•°ï¼‰ï¼šå­ç±»å¿…é¡»é‡å†™è¿™ä¸ªå‡½æ•°ï¼ˆå‡½æ•°åœ¨çˆ¶ç±»ä¸­æ— é»˜è®¤å®šä¹‰ï¼‰
- æ™®é€šå‡½æ•°ï¼šä¸å¸Œæœ›å­ç±»é‡å†™çš„å‡½æ•°
- æŠ½è±¡ç±»ï¼šåŒ…å«çº¯è™šå‡½æ•°çš„ç±»ï¼Œæ¯”å¦‚ä¸‹é¢çš„ Shape ç±»ï¼ŒæŠ½è±¡ç±»åªèƒ½è¢«ç»§æ‰¿å’Œå®ç°ï¼Œä¸èƒ½åˆ›å»ºå¯¹è±¡ï¼ˆå®ä¾‹åŒ–ï¼‰

```cpp
class Shape {
public:
    virtual void draw() const = 0;//çº¯è™šå‡½æ•°è¯­æ³•ï¼šå‡½æ•° = 0
    virtual void error(const string& msg){//è™šå‡½æ•°
        cout << msg << endl;
    }
};

class Rectangle : public Shape {
public:
    void draw() const override {
        cout << "Rectangle draw!" << endl;
    }
};
class circle : public Shape {
public:
    void draw() const override {
        cout << "circle draw!" << endl;
    }
};
int main() {
    Rectangle re;
    circle ci;
    re.draw();
    ci.draw();
    re.error("default error!");
//    Rectangle draw!
//    circle draw!
//    default error!
    return 0;
}
```

- è®¾è®¡æ¨¡å¼ä¹‹ **Template Method**ï¼ˆæ¨¡ç‰ˆæ–¹æ³•ï¼‰
    - **åœ¨çˆ¶ç±»ä¸­å®šä¹‰ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†å…¶ä¸­çš„æŸäº›å…·ä½“æ­¥éª¤æ¨è¿Ÿåˆ°å­ç±»å®ç°**ï¼ˆå­ç±»é€šè¿‡é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°ï¼‰
    - æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆæ‰“å¼€æ–‡ä»¶è¿™ä¸ªç®—æ³•ï¼Œè¿™äº›ç®—æ³•ä¸­æœ‰ä¸€äº›é€šç”¨æ­¥éª¤ï¼Œæ¯”å¦‚è¯´æ£€æµ‹è·¯å¾„åã€æ–‡ä»¶åç­‰ç­‰ï¼Œä½†ä¹Ÿæœ‰äº›ç‰¹æ®Šæ­¥éª¤ï¼Œæ¯”å¦‚é’ˆå¯¹æ–‡ä»¶æ ¼å¼ä¼šæœ‰ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼Œæˆ‘ä»¬å°†å®ç°è¿™ä¸ªæ–¹æ³•çš„å‡½æ•°å‘½åä¸º Serializeï¼Œåœ¨çˆ¶ç±»å°†å…¶å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œåœ¨å­ç±»ä¸­å†é‡å†™å®ç°å…·ä½“æ­¥éª¤
    - ä¸‹é¢ main()å‡½æ•°çš„æ‰§è¡Œæ­¥éª¤
        1. å­ç±»å¯¹è±¡è°ƒç”¨çˆ¶ç±»çš„ onFileOpen()å‡½æ•°
        2. æ‰§è¡Œçˆ¶ç±»çš„ onFileOpen()å‡½æ•°ï¼Œæ‰§è¡Œåˆ° Serialize()æ—¶ï¼Œè·³è½¬åˆ°å­ç±»å¯¹è¿™ä¸ªè™šå‡½æ•°çš„å®ç°
        3. æ‰§è¡Œå­ç±» override çš„ Serialize()åå›åˆ°çˆ¶ç±»ï¼Œæ‰§è¡Œå®Œå‰©ä½™çš„ onFileOpen()å‡½æ•°åè¿”å›åˆ° main()

<img src="https://raw.githubusercontent.com/mumushu1/Pictures/main/9a0f11a9b01bfd6b7c471dd8de1f205d.png" alt="image-20250515112857913" style="zoom:80%;" />	

- **å¤åˆå…³ç³» + ç»§æ‰¿å…³ç³»ä¸‹ï¼Œç¼–è¯‘å™¨æ‰§è¡Œæ„é€ å‡½æ•°çš„é¡ºåº**ï¼šâ‘  çˆ¶ç±»æ„é€ å‡½æ•° â‘¡ å­ç±»åŒ…å«çš„ç±»çš„æ„é€ å‡½æ•° â‘¢ å­ç±»æ„é€ å‡½æ•°

```cpp
class Shape {
public:
    Shape() {
        cout << "Shapeï¼ˆçˆ¶ç±»ï¼‰çš„æ„é€ å‡½æ•°æ‰§è¡Œäº†" << endl;
    }
};
class special_rectangle {
public:
    special_rectangle() {
        cout << "special_rectangleï¼ˆå­ç±»å¤åˆå…³ç³»åŒ…å«çš„ç±»ï¼‰çš„æ„é€ å‡½æ•°æ‰§è¡Œäº†" << endl;
    }
};

class Rectangle : public Shape {
public:
    special_rectangle sr;
    Rectangle() {
        cout << "Rectangleï¼ˆå­ç±»ï¼‰çš„æ„é€ å‡½æ•°æ‰§è¡Œäº†" << endl;
    }
};

Rectangle re;//å­ç±»å®ä¾‹åŒ–
```

<img src="https://raw.githubusercontent.com/mumushu1/Pictures/main/3e254ef4290246fe80ddbd5de54d2a11.png" alt="image-20250515112922558" style="zoom:80%;" />	

- ææ„æ¬¡åºåˆ™å®Œå…¨ç›¸å

### 22.è§‚å¯Ÿè€…æ¨¡å¼

- ç±»ä¼¼äº Notion ä¸­æ•°æ®åº“çš„ä¸åŒè§†å›¾ï¼Œæœ‰è¡¨æ ¼è§†å›¾ï¼Œæ—¥å†è§†å›¾ï¼ŒçŠ¶æ€æ è§†å›¾ç­‰ç­‰
- å½“ä¸€ä¸ªå¯¹è±¡(Subject)çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå…¶ä»–æ‰€æœ‰ä¾èµ–è€…(Observer çš„å­ç±»)éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°
- `Observer` æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œå®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£ `update()`ï¼Œä¸åŒå­ç±»ç»§æ‰¿ Observer å¹¶é‡å†™ update()å®ç°ä¸åŒè§†å›¾çš„æ›´æ–°
- Subject æ›´æ–°åï¼Œéœ€è¦è®©æ‰€æœ‰è§‚å¯Ÿè€…çš„æ•°æ®ä¹Ÿæ›´æ–°ï¼Œä½†ä¸åŒè§‚å¯Ÿè€…æ›´æ–°æ•°æ®çš„æ–¹å¼å¯èƒ½ä¸åŒï¼Œå› æ­¤ Subject ä¸­è®¾ç½®äº† Observe *ç±»å‹çš„æŒ‡é’ˆï¼Œå°† update çš„ä»»åŠ¡* *å§”æ‰˜**ç»™ Observer

```cpp
class Observer;

class Subject {
    int m_value;
    vector<Observer*> m_views;
public:
    //æ·»åŠ æ–°è§†å›¾
    void attach(Observer *obs) {
        m_views.push_back(obs);
    }
    //è®¾ç½® Subject çš„æ–°å€¼ï¼Œå¹¶è‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
    void set_val(int value) {
        m_value = value;
        notify();
    }
    //éå†æ‰€æœ‰è§‚å¯Ÿè€…ï¼Œè°ƒç”¨å®ƒä»¬çš„ update() æ¥å£ï¼Œå°† subject å¯¹è±¡å’Œ m_value çš„å€¼ä¼ ç»™è§‚å¯Ÿè€…
    void notify();
};

class Observer {
public:
    virtual void update(Subject* sub,int value) = 0;//æ¯ä¸ªè§‚å¯Ÿè€…éƒ½æœ‰è‡ªå·±çš„æ›´æ–°æ–¹å¼ï¼Œå› æ­¤è®¾ç½®ä¸ºè™šå‡½æ•°
};

inline void Subject::notify() {
    for (int i = 0; i < m_views.size(); i++)
        m_views[i]->update(this, m_value);
}
```

- ä»¥ Notion ä¸­æ•°æ®åº“çš„ä¸åŒè§†å›¾å¤§æ¦‚ä¸¾ä¸€ä¸ªä¾‹å­

```cpp
//è¢«è§‚å¯Ÿè€…ï¼Œç›¸å½“äºä¸Šé¢çš„ subject
class Database {
	vector<Observer*> m_views;
}

class Observer {}//è§‚å¯Ÿè€…çš„çˆ¶ç±»

class Table : public Observer{}//è¡¨æ ¼è§†å›¾
class Calendar : public Observer{}//æ—¥å†è§†å›¾
class StatusBar : public Observer{}//çŠ¶æ€æ è§†å›¾
```

### 23.ç»„åˆæ¨¡å¼

- å¯ä»¥è®©â€œç»„åˆå¯¹è±¡â€å’Œâ€œå•ä¸ªå¯¹è±¡â€å…·æœ‰ **ä¸€è‡´æ¥å£** è¿›è¡Œæ“ä½œï¼Œå³å¯ä»¥åƒå¤„ç†å•ä¸ªå¯¹è±¡ä¸€æ ·ï¼Œç»Ÿä¸€å¤„ç†å¤æ‚çš„ç»„åˆç»“æ„
    - ç»„åˆå¯¹è±¡ï¼šç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å¤¹
    - å•ä¸ªå¯¹è±¡ï¼šç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„å•ä¸ªæ–‡ä»¶

```cpp
class Component {
    int value;
public:
    Component(int val) {value = val;}
    virtual void add(Component*){}
};

//ç»„åˆå¯¹è±¡ - ç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å¤¹
class Composite : public Component{
    vector<Component*> c;
public:
    Composite(int val) : Component(val){}
    void add(Component* elem) {//æ–‡ä»¶å¤¹ä¸­å¯ä»¥åŠ å…¥æ–‡ä»¶
        c.push_back(elem);
    }
};

//å¶å­ç»“ç‚¹ - ç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶
class Primitive : public Component {
public:
    Primitive(int val) : Component(val) {}
};

```