## 1.相关理论内容

### 1.1 内存池是什么

- 是一种**预分配内存并进行重复利用的技术**，通过**减少频繁的动态内存分配与释放操作**，提高程序运行效率
- 因为申请内存要涉及到**系统调用**，os由用户态 → 内核态，无疑会增大开销
- 内存池通常**预先分配一块较大的空间**，将其划分为多个小块，每次需要分配内存时直接从这块大的空间中分配（通过预分配和一些管理逻辑提高内存分配和释放效率）

### 1.2 内存池的作用

1. 首先就是上文提到的减少频繁的动态内存分配与释放，提高程序运行效率（降低系统调用频率）
2. 减少外碎片问题：频繁的`malloc/free`会使内存中大的空闲块越来越少
3. 分配时间更可靠：内存池可以使分配和释放操作的**耗时**更加可控和稳定，适合**实时OS**

### 1.3 内存池应用场景

- 游戏开发：大量小对象（粒子、子弹等）动态分配和释放很频繁
- 网络编程：大量请求和响应对象的频繁创建与销毁
- 内存管理库：`vector、deque`等容器内部使用内存池优化分配性能

- 实时OS：追求分配释放内存的稳定性
- 高性能计算：高性能计算程序中，频繁分配释放内存影响整个程序性能
- 服务器开发：web服务器 管理大量连接和请求

### 1.4 内存池的缺点

- 初始内存占用：内存池需要分配较大内存作为初始内存，可能会浪费一些内存
- 复杂：使用内存池分配内存比直接使用new/malloc更复杂
- 不适合大型对象：因为**内存池设计的初衷就是针对频繁分配的小对象**，而大型对象往往占用空间大，且分配不频繁

